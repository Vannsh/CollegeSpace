<%- include("partials/userNav") -%>
<%- include("partials/herdr") -%>
 
<header id="main-header" style="background-color: #1d2d50;" class="py-2 text-white">
    <div style="text-align: center;">
      <h1><i class="fas fa-user-alt"></i> Profile</h1>
    </div>
</header>



<section id="actions" class="py-4 mb-4">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
            <a href="/portal" class="btn btn-light btn-block">
            <i class="fa fa-arrow-left"></i> Back To Dashboard
          </a>
        </div>
        
        <div class="col-md-3">
          <a href="" class="btn btn-primary btn-block" style="background-color: #1f4068; font-weight: bold; " data-toggle="modal" data-target="#changePasswordModal">
            <i class="fa fa-key"></i> Change Password
          </a>
        </div>
        
        <div class="col-md-3">
          <a href="" class="btn btn-block" style="background-color: #1f4068; font-weight: bold; color: white;" data-toggle="modal" data-target="#updateProfileModal">
            <i class="fa fa-refresh"></i> Update Profile
          </a>
        </div>
        
      </div>
    </div>
  </section>

  <section class="mt-4">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
              <img src="uploads/<%=printData.imagename%>" class="card-img-top rounded-circle" style="height: 200px; width: 200px;">
              <a href="" class="text-muted ml-5" data-toggle="modal" data-target="#changePhotoModal"><i class="fa fa-camera"></i> Change Photo</a>
            </div>
            <div class="col-md-6">
                <h4 class="text-center pb-3">Personal Informations</h4>
                
                <ul class="list-group list-group-flush">
                  <li class="list-group-item ">First Name :   <%=printData.name%></li>
                  <li class="list-group-item ">Last Name :   <%=printData.lname%></li>
                  <li class="list-group-item ">Username :   <%=printData.name%></li>
                  <li class="list-group-item ">Email :  <%=printData.username%> </li>
                </ul>
            </div>
            
        </div>
    </div>
</section>



<!--Change Password Modal-->
<div class="modal fade" id="changePasswordModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div style="background-color:  #1f4068;" class="modal-header text-white">
          <h5 class="modal-title" id="passwordModalLabel">
            Edit Password
          </h5>
          <button style="color: white;" class="close" data-dismiss="modal" ><span>&times;</span></button>
        </div>
        <div class="modal-body">
          <form action="/changePassword" method="POST">
            <div class="form-group">
              <label for="password" class="form-control-label">Old Password</label>
              <input type="password" name="oldPassword" class="form-control">
            </div>
            <div class="form-group">
              <label for="password" class="form-control-label">New Password</label>
              <input id="password" type="password" name="password" class="form-control">
            </div>
  
            <div class="form-group">
              <label for="password" class="form-control-label">Confirm Password</label>
              <input id="confirmPassword" type="password" name="confirmPassword" class="form-control">
               <span id='message'></span>
            </div>
            <button id="button" class="btn btn-block featureButton">Submit</button>
          </form>
        </div> 
      </div>
    </div>
  </div>



  <!--Update Profile Modal-->
<div class="modal fade" id="updateProfileModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div style="background-color:  #1f4068;" class="modal-header text-white">
          <h5 class="modal-title" id="updateProfileModalLabel">
            Edit Profile
          </h5>
          <button style="color: white;" class="close" data-dismiss="modal" ><span>&times;</span></button>
        </div>
        <div class="modal-body">
          <form action="/updateProfile" method="POST">
            <div class="form-group">
              <label for="firstName" class="form-control-label">Edit First Name</label>
              <input type="text" name="firstName" class="form-control"  value="<%=printData.name%>">
            </div>
            <div class="form-group">
              <label for="lastName" class="form-control-label">Edit Last Name</label>
              <input type="text" name="lastName" class="form-control" value="<%=printData.lname%>">
            </div>
            
            <div class="form-group">
              <label for="email" class="form-control-label">Change Email</label>
              <input type="email" name="email" class="form-control" value="<%=printData.username%>">
            </div>
            <button class="btn btn-block featureButton">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>




  <script>
    $('#confirmPassword').on('keyup', function () {
      if ($(this).val() == $('#password').val()) {
        $('#message').html('Matched').css('color', 'green');
        $('#button').removeClass("d-none")
      } 
      else{
        $('#message').html('Not matched!').css('color', 'red');
        $('#button').addClass("d-none");
      }
  });
  </script>




<%- include("partials/footer") -%>